angular.module("angularResizable",[]).directive("resizable",function(){function e(e){void 0===t?(t=e,setTimeout(function(){t(),t=void 0},100)):t=e}var t;return{restrict:"AE",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@",rNoThrottle:"=",resizable:"@"},link:function(t,r,n){if("false"!==t.resizable){var i="flexBasis"in document.documentElement.style?"flexBasis":"webkitFlexBasis"in document.documentElement.style?"webkitFlexBasis":"msFlexPreferredSize"in document.documentElement.style?"msFlexPreferredSize":"flexBasis";t.$watch("rWidth",function(e){r[0].style[t.rFlex?i:"width"]=t.rWidth+"px"}),t.$watch("rHeight",function(e){r[0].style[t.rFlex?i:"height"]=t.rHeight+"px"}),r.addClass("resizable");var o,s,a,l,u,d=window.getComputedStyle(r[0],null),c=t.rDirections||["right"],h=t.rCenteredX?2:1,m=t.rCenteredY?2:1,p=t.rGrabber?t.rGrabber:"<span></span>",x={},v=function(e){x.width=!1,x.height=!1,u.x&&(x.width=parseInt(r[0].style[t.rFlex?i:"width"])),u.y&&(x.height=parseInt(r[0].style[t.rFlex?i:"height"])),x.id=r[0].id,x.evt=e},f=function(e){return e.touches?e.touches[0].clientX:e.clientX},g=function(e){return e.touches?e.touches[0].clientY:e.clientY},b=function(n){function u(){t.$emit("angular-resizable.resizing",x)}var d,c={x:a.x-f(n),y:a.y-g(n)};/left/.test(l)&&(d=t.rFlex?i:"width",r[0].style[d]=o+c.x*h+"px"),/right/.test(l)&&(d=t.rFlex?i:"width",r[0].style[d]=o-c.x*h+"px"),/top/.test(l)&&(d=t.rFlex?i:"height",r[0].style[d]=s+c.y*m+"px"),/bottom/.test(l)&&(d=t.rFlex?i:"height",r[0].style[d]=s-c.y*m+"px"),v(n),t.rNoThrottle?u():e(u)},y=function(e){v(e),t.$emit("angular-resizable.resizeEnd",x),t.$apply(),document.removeEventListener("mouseup",y,!1),document.removeEventListener("mousemove",b,!1),document.removeEventListener("touchend",y,!1),document.removeEventListener("touchmove",b,!1),r.removeClass("no-transition")},F=function(e,n){l=n,u={},/left|right/.test(l)&&(u.x=!0),/top|bottom/.test(l)&&(u.y=!0),a={x:f(e),y:g(e)},t.rFlex&&(o=parseInt(d.getPropertyValue("flex-basis"))||0),t.rFlex&&0!=o||(o=parseInt(d.getPropertyValue("width"))),t.rFlex&&(s=parseInt(d.getPropertyValue("flex-basis"))||0),t.rFlex&&0!=s||(s=parseInt(d.getPropertyValue("height"))),r.addClass("no-transition"),document.addEventListener("mouseup",y,!1),document.addEventListener("mousemove",b,!1),document.addEventListener("touchend",y,!1),document.addEventListener("touchmove",b,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,v(e),t.$emit("angular-resizable.resizeStart",x),t.$apply()};c.forEach(function(e){var n=document.createElement("div");n.setAttribute("class","rg-"+e),n.innerHTML=p,r[0].appendChild(n),n.ondragstart=function(){return!1},n.addEventListener("click",function(e){return e.stopPropagation(),!1});var i=function(r){var n="true"===t.rDisabled;n||1!==r.which&&!r.touches||F(r,e)};angular.element(n).on("mousedown",i),angular.element(n).on("touchstart",i)})}}}});